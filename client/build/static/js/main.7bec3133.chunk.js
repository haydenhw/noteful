(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{40:function(e,t,n){e.exports=n(77)},45:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(37),c=n.n(l),o=(n(45),n(3)),u=n.n(o),i=n(2),s=n(8),d=n(4),m=n(10),f=n(26),h=n(13),v={folders:[],notes:[]},p=function(e,t){switch(t.type){case"loadFolders":return Object(h.a)({},e,{folders:t.folders});case"addFolder":return Object(h.a)({},e,{folders:[].concat(Object(f.a)(e.folders),[t.newFolder])});case"deleteFolder":return Object(h.a)({},e,{folders:e.folders.filter((function(e){return e.id!==t.id}))});case"loadNotes":return Object(h.a)({},e,{notes:t.notes});case"addNote":return Object(h.a)({},e,{notes:[].concat(Object(f.a)(e.notes),[t.newNote])});case"deleteNote":return Object(h.a)({},e,{notes:e.notes.filter((function(e){return e.id!==t.id}))});default:return e}},E=Object(a.createContext)(),b=function(e){return r.a.createElement(E.Provider,{value:Object(a.useReducer)(p,v)},e.children)},g=function(){return Object(a.useContext)(E)},y=n(20),N=n.n(y),w="http://localhost:9090",j=function(e){return N.a.get("".concat(w).concat(e)).then((function(e){return e.data}))},O=function(e,t){return N.a.post("".concat(w).concat(e),t).then((function(e){return e.data}))},x=function(e,t){return N.a.patch("".concat(w).concat(e),t).then((function(e){return e.data}))},k=function(e,t){return N.a.delete("".concat(w).concat(e)).then((function(e){return e.data}))},C={fetchFolders:function(){return j("/folders")},createFolder:function(e){return O("/folders",e)},updateFolder:function(e){return x("/folders/".concat(e))},deleteFolder:function(e){return k("/folders/".concat(e))},fetchNotes:function(){return j("/notes")},createNote:function(e){return O("/notes",e)},updateNote:function(e){return x("/notes/".concat(e))},deleteNote:function(e){return k("/notes/".concat(e))}},F={nav:{paddingLeft:"15px"}};var S=function(){return r.a.createElement("nav",null,r.a.createElement("div",{style:F.nav,className:"nav-wrapper"},r.a.createElement(d.b,{className:"brand-logo",to:"/"},"Noteful")))},D=n(14),B=n(15),L=n(18),W=n(17),q=function(e){Object(L.a)(n,e);var t=Object(W.a)(n);function n(e){var a;return Object(D.a)(this,n),(a=t.call(this,e)).state={hasError:!1},a}return Object(B.a)(n,[{key:"render",value:function(){return this.state.hasError?a.createElement("h1",null,"Oops, Something went wrong."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return console.error(e),{hasError:!0}}}]),n}(a.Component),I={sidebarWrapper:{height:"100%",width:"300px"}};var A=function(e){return r.a.createElement(q,null,r.a.createElement("div",{style:I.sidebarWrapper},e.children))},R={main:{padding:"30px",width:"100%"}};var J=function(e){return r.a.createElement(q,null,r.a.createElement("main",{style:R.main},e.children))},M={sidebar:{transform:"translateX(0%)",position:"static",height:"100%"}};var P=function(){var e=g(),t=Object(i.a)(e,2),n=t[0].folders,a=(t[1],Object(m.g)().id),l=Object(m.f)(),c=n.map((function(e){var t={backgroundColor:e.id===a?"lightgrey":""};return(r.a.createElement("li",{style:t,key:e.id},r.a.createElement(d.b,{to:"/folder/".concat(e.id)},e.name)))}));return r.a.createElement("ul",{style:M.sidebar,className:"sidenav sidenav-fixed"},c,r.a.createElement("li",null,r.a.createElement("div",{style:{paddingLeft:"15px"}},r.a.createElement("button",{className:"waves-effect waves-light btn",onClick:function(){l.push("/add-folder")}},"Add Folder"))))},U={flexContainer:{display:"flex",height:"100%"}};var G=function(e){return r.a.createElement("div",{style:U.flexContainer},e.children)},H={row:{display:"flex"},colRight:{display:"flex",width:"100%",justifyContent:"flex-end",alignItems:"flex-end"}};var T=function(e){return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content",style:H.row},r.a.createElement("div",{className:"col-left"},r.a.createElement(d.b,{style:{color:"black"},to:"/note/".concat(e.id),className:"card-title"},e.name),r.a.createElement("span",null,new Date(e.modified).toString())),r.a.createElement("div",{className:"col-right",style:H.colRight},r.a.createElement("button",{onClick:e.onDelete,className:"waves-effect waves-light btn"},"Delete Note"))))},X=n(11),$=n.n(X),z={noteListWrap:{maxHeight:"70vh",overflow:"scroll"}};T.propTypes={notes:$.a.array};var K=function(e){var t=g(),n=Object(i.a)(t,2),a=(n[0],n[1]),l=function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.deleteNote(t);case 3:a({type:"deleteNote",id:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),c=Object(m.f)();e.notes=null;var o=e.notes.map((function(e){return r.a.createElement(T,Object.assign({key:e.id,onDelete:function(){return l(e.id)}},e))}));return(r.a.createElement("div",{className:"notes"},r.a.createElement("div",{style:z.noteListWrap},o),r.a.createElement("button",{onClick:function(){c.push("/add-note")},className:"waves-effect waves-light btn"},"Add Note")))};var Q=function(){var e=g(),t=Object(i.a)(e,1)[0],n=(t.folders,t.notes);return(r.a.createElement(G,null,r.a.createElement(A,null,r.a.createElement(P,null)),r.a.createElement(J,null,r.a.createElement(K,{notes:n}))))};var V=function(){var e=Object(m.g)().id,t=g(),n=Object(i.a)(t,1)[0].notes.filter((function(t){return t.folderId===e}));return r.a.createElement(G,null,r.a.createElement(A,null,r.a.createElement(P,null)),r.a.createElement(J,null,r.a.createElement(K,{notes:n})))};var Y=function(){var e=Object(m.g)().id,t=g(),n=Object(i.a)(t,2),a=n[0],l=a.folders,c=a.notes,o=n[1],f=Object(m.f)(),h=function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.deleteNote(t);case 3:f.push("/"),o({type:"deleteNote",id:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),v=c.find((function(t){return t.id===e})),p=l.find((function(e){return e.id===v.folderId})).name;return r.a.createElement(G,null,r.a.createElement(A,null,r.a.createElement("div",{style:{padding:"15px"}},r.a.createElement(d.b,{to:"/",className:"waves-effect waves-light btn"},"Go Back"),r.a.createElement("h4",null,p))),r.a.createElement(J,null,r.a.createElement(T,Object.assign({onDelete:function(){return h(v.id)}},v)),r.a.createElement("p",null,v.content)))},Z=n(16),_=n.n(Z);function ee(e){return e.message?r.a.createElement("div",{className:"error"},e.message):r.a.createElement(r.a.Fragment,null)}var te={form:{margin:"0 auto",width:"400px"},saveButton:{marginLeft:"10px"}},ne=function(e){Object(L.a)(n,e);var t=Object(W.a)(n);function n(e){var a;return Object(D.a)(this,n),(a=t.call(this,e)).state={name:{value:"",touched:!1}},a}return Object(B.a)(n,[{key:"updateName",value:function(e){this.setState({name:{value:e,touched:!0}})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state.name;this.props.onSubmit({name:t.value,id:_.a.generate()})}},{key:"validateName",value:function(){var e=this.state.name.value.trim();return 0===e.length?"Name is required":e.length<3?"Name must be at least 3 characters long":void 0}},{key:"render",value:function(){var e=this,t=this.validateName();return r.a.createElement("form",{style:te.form,onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("h2",null,this.props.title),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Folder Name *"),r.a.createElement("input",{type:"text",name:"name",id:"name",onChange:function(t){return e.updateName(t.target.value)}}),this.state.name.touched&&r.a.createElement(ee,{message:t})),r.a.createElement("div",null,r.a.createElement("button",{type:"reset",className:"waves-effect waves-light btn"},"Cancel"),r.a.createElement("button",{style:te.saveButton,type:"submit",className:"waves-light btn",disabled:this.validateName()},"Save")))}}]),n}(a.Component),ae=function(){var e=Object(s.a)(u.a.mark((function e(t,n,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.createFolder(a);case 2:t({type:"addFolder",newFolder:a}),n.push("/");case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();var re=function(){var e=g(),t=Object(i.a)(e,2),n=(t[0],t[1]),a=Object(m.f)();return r.a.createElement(ne,{title:"New Folder",onSubmit:function(e){try{ae(n,a,e)}catch(t){console.error(" Unfortunately your request to create a new folder failed with error: \n ".concat(t))}}})};var le=function(){return r.a.createElement(G,null,r.a.createElement(re,null))},ce={form:{margin:"0 auto",width:"400px"},saveButton:{marginLeft:"10px"}},oe=function(e){Object(L.a)(n,e);var t=Object(W.a)(n);function n(e){var a;return Object(D.a)(this,n),(a=t.call(this,e)).state={name:{value:"",touched:!1},content:{value:"",touched:!1},folder:{value:"",touched:!1}},a}return Object(B.a)(n,[{key:"componentDidMount",value:function(){this.props.folders&&this.props.folders.length&&this.setState({folder:{value:this.props.folders[0].id,touched:!1}})}},{key:"updateName",value:function(e){this.setState({name:{value:e,touched:!0}})}},{key:"updateContent",value:function(e){this.setState({content:{value:e,touched:!0}})}},{key:"updateFolder",value:function(e){this.setState({folder:{value:e,touched:!0}})}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),!this.validateContent()&&!this.validateName()){var t=this.state,n=t.name,a=t.content,r=t.folder,l={name:n.value,content:a.value,modified:new Date,folderId:r.value,id:_.a.generate()};console.log(l),this.props.onSubmit(l)}}},{key:"validateName",value:function(){var e=this.state.name.value.trim();return 0===e.length?"Name is required":e.length<3?"Name must be at least 3 characters long":void 0}},{key:"validateContent",value:function(){var e=this.state.content.value.trim();return 0===e.length?"Content is required":e.length<3?"Content must be at least 3 characters long":void 0}},{key:"render",value:function(){var e=this,t=this.validateName(),n=this.validateContent(),a=this.props.folders.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}));return r.a.createElement("form",{className:"registration",style:ce.form,onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("h2",null,this.props.title),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Note Name *"),r.a.createElement("input",{type:"text",name:"name",id:"name",onChange:function(t){return e.updateName(t.target.value)}}),this.state.name.touched&&r.a.createElement(ee,{message:t})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"content"},"Content *"),r.a.createElement("input",{type:"text",name:"content",id:"content",onChange:function(t){return e.updateContent(t.target.value)}}),this.state.content.touched&&r.a.createElement(ee,{message:n})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"content"},"Folder",r.a.createElement("select",{onChange:function(t){return e.updateFolder(t.target.value)},style:{display:"block"},name:"folder-select",id:"folder-select"},a)),this.state.content.touched&&r.a.createElement(ee,{message:n})),r.a.createElement("div",null,r.a.createElement("button",{type:"reset",className:"waves-effect waves-light btn"},"Cancel"),r.a.createElement("button",{style:ce.saveButton,type:"submit",className:"waves-light btn",disabled:this.validateName()||this.validateContent()},"Save")))}}]),n}(a.Component),ue=function(){var e=Object(s.a)(u.a.mark((function e(t,n,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.id=_.a.generate(),e.next=3,C.createNote(a);case 3:t({type:"addNote",newNote:a}),n.push("/");case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();var ie=function(){var e=g(),t=Object(i.a)(e,2),n=t[0].folders,a=t[1],l=Object(m.f)();return n.length?r.a.createElement(oe,{title:"New Note",folders:n,onSubmit:function(e){try{ue(a,l,e)}catch(t){console.error(" Unfortunately your request to create a new note fail with error: \n ".concat(t))}}}):r.a.createElement(r.a.Fragment,null)};var se=function(){return r.a.createElement(G,null,r.a.createElement(ie,null))},de=function(){var e=Object(s.a)(u.a.mark((function e(t){var n,a,r,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([C.fetchFolders(),C.fetchNotes()]);case 2:n=e.sent,a=Object(i.a)(n,2),r=a[0],l=a[1],t({type:"loadFolders",folders:r}),t({type:"loadNotes",notes:l});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var me=function(){var e=g(),t=Object(i.a)(e,2),n=(t[0],t[1]);return Object(a.useEffect)((function(){try{de(n)}catch(e){console.log("Failed to fetch notes and or folders with the following error:"),console.error(e)}}),[]),r.a.createElement(d.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(S,null),r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/"},r.a.createElement(Q,null)),r.a.createElement(m.a,{path:"/folder/:id"},r.a.createElement(V,null)),r.a.createElement(m.a,{path:"/note/:id"},r.a.createElement(Y,null)),r.a.createElement(m.a,{path:"/add-folder"},r.a.createElement(le,null)),r.a.createElement(m.a,{path:"/add-note"},r.a.createElement(se,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(b,null,r.a.createElement(me,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.7bec3133.chunk.js.map